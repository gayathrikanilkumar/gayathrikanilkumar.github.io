<script src='https://d3js.org/d3.v7.min.js'></script>

<script>
  let heartfailurecsv = 'https://raw.githubusercontent.com/akmand/datasets/master/heart_failure.csv';

  var count1 = 0,
    count2 = 0,
    count3 = 0,
    count4 = 0;
  var myData = [count1, count2, count3, count4];
  var line_counter = 0;

  d3.csv(heartfailurecsv, function(data) {

    // display paragraphs for the total patients with heart failure between 1-30, 31-40, 41-60, 61-100. 

    if (data.age >= 1 && data.age <= 30) {
      count1 += 1;
    } else if (data.age >= 31 && data.age <= 40) {
      count2 += 1;
    } else if (data.age >= 41 && data.age <= 60) {
      count3 += 1;
    } else if (data.age >= 61 && data.age <= 100) {
      count4 += 1;
    }

    // Process the data, store it in an array then pass that array

    var myData = [count1, count2, count3, count4];

    line_counter += 1;

    // print console log as output
    if (line_counter == 299) {
      d3.select("body").append("p").text('Count of Patients with heart failure from the age of 61 to 100:' + myData[3]);
      d3.select("body").append("p").text('Count of Patients with heart failure from the age of 41 to 60:' + myData[2]);
      d3.select("body").append("p").text('Count of Patients with heart failure from the age of 31 to 40:' + myData[1]);
      d3.select("body").append("p").text('Count of Patients with heart failure from the age of 0 to 30:' + myData[0]);
    }



  });

</script>
